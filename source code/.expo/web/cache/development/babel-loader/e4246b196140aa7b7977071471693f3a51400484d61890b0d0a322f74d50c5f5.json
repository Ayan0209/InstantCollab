{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useNavigation } from '@react-navigation/native';\nimport { getAuth } from 'firebase/auth';\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport getMatchedUserInfo from \"../lib/getMatchedUserInfo\";\nimport { db } from \"../firebase\";\nimport { collection, onSnapshot, orderBy } from 'firebase/firestore';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ChatRow = function ChatRow(_ref) {\n  var matchDetails = _ref.matchDetails;\n  var navigation = useNavigation();\n  var auth = getAuth();\n  var user = auth.currentUser;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    matchedUserInfo = _useState2[0],\n    setMatchedUserInfo = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    lastMessage = _useState4[0],\n    setLastMessage = _useState4[1];\n  useEffect(function () {\n    setMatchedUserInfo(getMatchedUserInfo(matchDetails.users, user.uid));\n  }, [matchDetails, user]);\n  useEffect(function () {\n    return onSnapshot(query(collection(db, 'matches', matchDetails.id, 'messages'), orderBy('timestamp', 'desc')), function (snapshot) {\n      var _snapshot$docs$, _snapshot$docs$$data;\n      return setLastMessage((_snapshot$docs$ = snapshot.docs[0]) == null ? void 0 : (_snapshot$docs$$data = _snapshot$docs$.data()) == null ? void 0 : _snapshot$docs$$data.message);\n    });\n  }, [matchDetails, db]);\n  var styles = StyleSheet.create({\n    container: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: '#f5f5f5',\n      paddingVertical: 12,\n      paddingHorizontal: 16,\n      marginVertical: 6,\n      marginHorizontal: 12,\n      borderRadius: 10,\n      shadowColor: '#000',\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowOpacity: 0.3,\n      shadowRadius: 2,\n      elevation: 2\n    },\n    image: {\n      width: 50,\n      height: 50,\n      borderRadius: 25,\n      marginRight: 12\n    },\n    userInfoContainer: {\n      flex: 1\n    },\n    displayName: {\n      fontSize: 16,\n      fontWeight: '600'\n    },\n    sayHiText: {\n      fontSize: 12,\n      color: '#888888'\n    }\n  });\n  return _jsxs(TouchableOpacity, {\n    style: styles.container,\n    onPress: function onPress() {\n      return navigation.navigate(\"Message\", {\n        matchDetails: matchDetails\n      });\n    },\n    children: [_jsx(Image, {\n      style: styles.image,\n      source: matchedUserInfo == null ? void 0 : matchedUserInfo.photoURL\n    }), _jsxs(View, {\n      style: styles.userInfoContainer,\n      children: [_jsx(Text, {\n        style: styles.displayName,\n        children: matchedUserInfo == null ? void 0 : matchedUserInfo.displayName\n      }), _jsx(Text, {\n        style: styles.sayHiText,\n        children: lastMessage || \"Say Hi!\"\n      })]\n    })]\n  });\n};\nexport default ChatRow;","map":{"version":3,"names":["useNavigation","getAuth","React","useEffect","useState","View","Text","TouchableOpacity","SafeAreaView","Image","StyleSheet","getMatchedUserInfo","db","collection","onSnapshot","orderBy","jsx","_jsx","jsxs","_jsxs","ChatRow","_ref","matchDetails","navigation","auth","user","currentUser","_useState","_useState2","_slicedToArray","matchedUserInfo","setMatchedUserInfo","_useState3","_useState4","lastMessage","setLastMessage","users","uid","query","id","snapshot","_snapshot$docs$","_snapshot$docs$$data","docs","data","message","styles","create","container","flexDirection","alignItems","backgroundColor","paddingVertical","paddingHorizontal","marginVertical","marginHorizontal","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","image","marginRight","userInfoContainer","flex","displayName","fontSize","fontWeight","sayHiText","color","style","onPress","navigate","children","source","photoURL"],"sources":["C:/Users/ayang/Documents/InfluGuruScratchStart/influguru/components/ChatRow.js"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport { getAuth } from 'firebase/auth';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, SafeAreaView, Image, StyleSheet } from 'react-native';\r\nimport getMatchedUserInfo from '../lib/getMatchedUserInfo';\r\nimport { db } from '../firebase';\r\nimport { collection, onSnapshot, orderBy } from 'firebase/firestore';\r\n\r\nconst ChatRow = ({ matchDetails }) => {\r\n  const navigation = useNavigation();\r\n  const auth = getAuth();\r\n  const user = auth.currentUser;\r\n  const [matchedUserInfo, setMatchedUserInfo] = useState(null);\r\n  const [lastMessage, setLastMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    setMatchedUserInfo(getMatchedUserInfo(matchDetails.users, user.uid));\r\n  }, [matchDetails, user]);\r\n\r\n  useEffect(() => onSnapshot(query(collection(db, 'matches', matchDetails.id, 'messages'),\r\n    orderBy('timestamp', 'desc')\r\n    ), snapshot => setLastMessage(snapshot.docs[0]?.data()?.message)\r\n    )\r\n  , [matchDetails, db])\r\n\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      backgroundColor: '#f5f5f5',\r\n      paddingVertical: 12,\r\n      paddingHorizontal: 16,\r\n      marginVertical: 6,\r\n      marginHorizontal: 12,\r\n      borderRadius: 10,\r\n      shadowColor: '#000',\r\n      shadowOffset: {\r\n        width: 0,\r\n        height: 2,\r\n      },\r\n      shadowOpacity: 0.3,\r\n      shadowRadius: 2,\r\n      elevation: 2,\r\n    },\r\n    image: {\r\n      width: 50,\r\n      height: 50,\r\n      borderRadius: 25,\r\n      marginRight: 12,\r\n    },\r\n    userInfoContainer: {\r\n      flex: 1,\r\n    },\r\n    displayName: {\r\n      fontSize: 16,\r\n      fontWeight: '600',\r\n    },\r\n    sayHiText: {\r\n      fontSize: 12,\r\n      color: '#888888',\r\n    },\r\n  });\r\n  \r\n  return (\r\n    <TouchableOpacity style={styles.container} onPress={() => navigation.navigate(\"Message\", {\r\n        matchDetails,\r\n    })}>\r\n      <Image style={styles.image} source={matchedUserInfo?.photoURL} />\r\n      <View style={styles.userInfoContainer}>\r\n        <Text style={styles.displayName}>\r\n            {matchedUserInfo?.displayName}\r\n        </Text>\r\n        <Text style={styles.sayHiText}>{lastMessage || \"Say Hi!\"}</Text>\r\n      </View>\r\n    </TouchableOpacity>\r\n  );\r\n};\r\n\r\nexport default ChatRow;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}