{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useNavigation } from '@react-navigation/native';\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Header from \"../components/Header\";\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\nimport { db } from \"../firebase\";\nimport { getAuth } from 'firebase/auth';\nimport ChatRow from \"./ChatRow\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ChatList = function ChatList() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    matches = _useState2[0],\n    setMatches = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var auth = getAuth();\n  var user = auth.currentUser;\n  useEffect(function () {\n    var unsubscribe = onSnapshot(query(collection(db, 'matches'), where('usersMatched', 'array-contains', user.uid)), function (snapshot) {\n      var matchesData = snapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n      setMatches(matchesData);\n      setLoading(false);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, [user]);\n  if (loading) {\n    return _jsx(View, {\n      children: _jsx(Text, {\n        children: \"Loading...\"\n      })\n    });\n  }\n  console.log('This is matches', matches);\n  return matches.length > 0 ? _jsx(FlatList, {\n    style: {\n      flex: 1\n    },\n    data: matches,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return _jsx(ChatRow, {\n        matchDetails: item\n      });\n    }\n  }) : _jsx(View, {\n    children: _jsx(Text, {\n      children: \"No Matches at the moment!\"\n    })\n  });\n};\nexport default ChatList;","map":{"version":3,"names":["useNavigation","React","useEffect","useState","View","Text","TouchableOpacity","SafeAreaView","FlatList","Header","collection","onSnapshot","query","where","db","getAuth","ChatRow","jsx","_jsx","ChatList","_useState","_useState2","_slicedToArray","matches","setMatches","_useState3","_useState4","loading","setLoading","auth","user","currentUser","unsubscribe","uid","snapshot","matchesData","docs","map","doc","_objectSpread","id","data","children","console","log","length","style","flex","keyExtractor","item","renderItem","_ref","matchDetails"],"sources":["C:/Users/ayang/Documents/InfluGuruScratchStart/influguru/components/ChatList.js"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, Text, TouchableOpacity, SafeAreaView, FlatList } from 'react-native';\r\nimport Header from '../components/Header';\r\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\nimport { getAuth } from 'firebase/auth';\r\nimport ChatRow from './ChatRow';\r\n\r\nconst ChatList = () => {\r\n  const [matches, setMatches] = useState([]);\r\n  const [loading, setLoading] = useState(true); // Add loading state\r\n  const auth = getAuth();\r\n  const user = auth.currentUser;\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onSnapshot(\r\n      query(collection(db, 'matches'), where('usersMatched', 'array-contains', user.uid)),\r\n      (snapshot) => {\r\n        const matchesData = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setMatches(matchesData);\r\n        setLoading(false); // Set loading state to false after data retrieval\r\n      }\r\n    );\r\n\r\n    return () => unsubscribe(); // Cleanup function to unsubscribe from the snapshot listener\r\n  }, [user]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View>\r\n        <Text>Loading...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  console.log('This is matches', matches);\r\n\r\n  return matches.length > 0 ? (\r\n    <FlatList\r\n      style={{ flex: 1 }}\r\n      data={matches}\r\n      keyExtractor={(item) => item.id}\r\n      renderItem={({ item }) => <ChatRow matchDetails={item} />}\r\n    />\r\n  ) : (\r\n    <View>\r\n      <Text>No Matches at the moment!</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default ChatList;\r\n"],"mappings":";;;;AAAA,SAASA,aAAa,QAAQ,0BAA0B;AACxD,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,gBAAA;AAAA,OAAAC,YAAA;AAAA,OAAAC,QAAA;AAEnD,OAAOC,MAAM;AACb,SAASC,UAAU,EAAEC,UAAU,EAAEC,KAAK,EAAEC,KAAK,QAAQ,oBAAoB;AACzE,SAASC,EAAE;AACX,SAASC,OAAO,QAAQ,eAAe;AACvC,OAAOC,OAAO;AAAkB,SAAAC,GAAA,IAAAC,IAAA;AAEhC,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;EACrB,IAAAC,SAAA,GAA8BjB,QAAQ,CAAC,EAAE,CAAC;IAAAkB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAA8BtB,QAAQ,CAAC,IAAI,CAAC;IAAAuB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAMG,IAAI,GAAGd,OAAO,CAAC,CAAC;EACtB,IAAMe,IAAI,GAAGD,IAAI,CAACE,WAAW;EAE7B7B,SAAS,CAAC,YAAM;IACd,IAAM8B,WAAW,GAAGrB,UAAU,CAC5BC,KAAK,CAACF,UAAU,CAACI,EAAE,EAAE,SAAS,CAAC,EAAED,KAAK,CAAC,cAAc,EAAE,gBAAgB,EAAEiB,IAAI,CAACG,GAAG,CAAC,CAAC,EACnF,UAACC,QAAQ,EAAK;MACZ,IAAMC,WAAW,GAAGD,QAAQ,CAACE,IAAI,CAACC,GAAG,CAAC,UAACC,GAAG;QAAA,OAAAC,aAAA;UACxCC,EAAE,EAAEF,GAAG,CAACE;QAAE,GACPF,GAAG,CAACG,IAAI,CAAC,CAAC;MAAA,CACb,CAAC;MACHjB,UAAU,CAACW,WAAW,CAAC;MACvBP,UAAU,CAAC,KAAK,CAAC;IACnB,CACF,CAAC;IAED,OAAO;MAAA,OAAMI,WAAW,CAAC,CAAC;IAAA;EAC5B,CAAC,EAAE,CAACF,IAAI,CAAC,CAAC;EAEV,IAAIH,OAAO,EAAE;IACX,OACET,IAAA,CAACd,IAAI;MAAAsC,QAAA,EACHxB,IAAA,CAACb,IAAI;QAAAqC,QAAA,EAAC;MAAU,CAAM;IAAC,CACnB,CAAC;EAEX;EAEAC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAErB,OAAO,CAAC;EAEvC,OAAOA,OAAO,CAACsB,MAAM,GAAG,CAAC,GACvB3B,IAAA,CAACV,QAAQ;IACPsC,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAE,CAAE;IACnBN,IAAI,EAAElB,OAAQ;IACdyB,YAAY,EAAE,SAAAA,aAACC,IAAI;MAAA,OAAKA,IAAI,CAACT,EAAE;IAAA,CAAC;IAChCU,UAAU,EAAE,SAAAA,WAAAC,IAAA;MAAA,IAAGF,IAAI,GAAAE,IAAA,CAAJF,IAAI;MAAA,OAAO/B,IAAA,CAACF,OAAO;QAACoC,YAAY,EAAEH;MAAK,CAAE,CAAC;IAAA;EAAC,CAC3D,CAAC,GAEF/B,IAAA,CAACd,IAAI;IAAAsC,QAAA,EACHxB,IAAA,CAACb,IAAI;MAAAqC,QAAA,EAAC;IAAyB,CAAM;EAAC,CAClC,CACP;AACH,CAAC;AAED,eAAevB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}